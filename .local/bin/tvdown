#!/bin/sh
if [ -n "$SWAYSOCK" ]; then
	swaymsg output eDP-1 resolution 1920 1080 position 0 0
	swaymsg focus output eDP-1
	swaymsg output HDMI-A-1 disable

	swaymsg input '2:14:ETPS/2_Elantech_Touchpad' events enabled
else
	if xrandr | grep HDMI-1-1; then
		DSP=eDP-1-1
		TV=HDMI-1-1
	else
		DSP=eDP-1
		TV=HDMI-1
	fi

	xrandr --output $TV --off --output $DSP --primary --mode 1920x1080 --pos 0x0 --rotate normal
	xinput --enable 'ETPS/2 Elantech Touchpad'

	if [ "$XDG_SESSION_DESKTOP" == bspwm ]; then
		bspc monitor $TV -r
		kill "$(ps ax | grep barline | grep $TV | cut -d' ' -f2)"
		bspwmmon $DSP
		bspc wm -o
	fi
fi
